{% extends "base.html" %}
{% block content %}
	<style>
	
		.dropdown-menu {z-index:1050;}
		body { background-color: #323232;
		color: #2c8A64;	
		}

		h2 {
			font-family: 'Poiret One', cursive;
			font-size:2.5em;
		}
		
		legend {
			color:#2C8A64;
			font-family: 'Poiret One', cursive;
			font-size:2em;
		}
		
				
		table{
			text-align:center;
		}
		
		th {
			text-align:center;
		}
		

		.nav > li > a {color: #2C8A64;	}
		.nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover {background-color: #2C8A64; text-decoration:none; color:white}
		
		
		.container_details {text-align: center}
		.GJButton{ border-color:#2C8A64; background-color: #2C8A64; background-image:none; outline:none;  font-family: 'Poiret One', cursive;}
		.GJButton:hover, .GJButton:focus, .GJButton:active { border-color: #/FED136; background-color: #FED136; transition:all 0.5s; outline:none;  font-family: 'Poiret One', cursive;}
		.btn-success{ border-color:#2C8A64; background-color: #2C8A64; background-image:none; outline:none; font-family: 'Poiret One', cursive;}
		.btn-success:hover , .btn-success:focus, .btn-success:active { border-color: #19E794; background-color: #19E794; transition:all 0.5s; outline:none; font-family: 'Poiret One', cursive;}
	</style>
	
	<div class="container" style="padding-top:1%">
		<div id="createLegend">
			<h2 style="text-align:center"> Edit <i>"{{menuObject.item_nickname}}" </i></h2> 
			<!-- <legend style="font-size:50px; text-align:center;" > Create an item  </legend> -->
	</div>

	<section>
		
			<div id="startButton" style="text-align:center; padding-bottom:23%; font-family: 'Poiret One', cursive"><button type="button" class="btn btn-success btn-lg">Start</button> </div>

<!-- 			{% for message in messages %}
				<div class="alert alert-{{ message.tags }}">{{ message }}</div>
			{% endfor %} -->
			<form action="/editItem/{{item_id}}/" method="POST"> {% csrf_token %}
				<div class="row">
					<div class="col-xs-12 col-md-4" id="basicInfoDiv">
						<legend style="text-align:center" > <span>&#10102;</span> Basic Info  </legend>
						<div class="form-group">
							<label for="nickNameEdit">Item Nickname</label>
							<div class="input-group" style="width:100%">
								<input class="form-control" name="nickNameEdit" value="{{menuObject.item_nickname}}" placeholder="Ex: Big Mac, Egg Muffin, Ultimate Supreme Pizza, .." required>
							</div>
						</div>
						<div class="form-group">
							<label for="basePriceEdit">Base Price* </label>
							<div class="input-group">
								<div class="input-group-addon">$</div>
								<input class="form-control" id="basePriceNatural" name="basePriceNatural" value="{{menuObject.priceIntegers}}" placeholder="Ex: 2 dollars" required pattern="\d+">
								<div class="input-group-addon">.</div>
								<input class="form-control" id="basePriceFloat" name="basePriceFloat" value="{{menuObject.priceFloats}}" placeholder="Ex: 90 cents" required pattern="\d{2}">
							</div>
						</div>
						<div class="form-group">
							<label for="startDateEdit">Item Start Date</label>
							<div class='input-group date' id='datetimepicker1' data-date="{{menuObject.item_startDate}}" data-date-format="mm-dd-yyyy">
								<input type='text' class="form-control" name="startDateEdit"  value="{{menuObject.item_startDate}}" id="startDateEdit" required pattern="(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])-[0-9]{4}">
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-calendar"></span>
								</span>
							</div>
						</div>
						<div class="form-group">
							<label for="endDateEdit">Item End Date</label>
							<div class='input-group date' id='datetimepicker2' data-date="{{menuObject.item_startDate}}" data-date-format="mm-dd-yyyy">
								<input type='text' class="form-control" name="endDateEdit" value="{{menuObject.item_endDate}}" id="endDateEdit"  required pattern="(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])-[0-9]{4}">
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-calendar"></span>
								</span>
							</div>
						</div><div class="form-group">
							<label for="startTimeEdit">Item Start Time</label>
							<div class='input-group bootstrap-timepicker timepicker'>
								<input type='text' class="form-control" name="startTimeEdit" value="{{menuObject.item_startTime}}" id='datetimepicker3' data-provide="timepicker" data-minute-step="15" />
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-time"></span>
								</span>
							</div>
						</div><div class="form-group">
							<label for="endTimeEdit">Item End Time</label>
							<div class='input-group bootstrap-timepicker timepicker'>
								<input type='text' class="form-control" name="endTimeEdit" value="{{menuObject.item_endTime}}" id='datetimepicker4' data-provide="timepicker" data-minute-step="15" />
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-time"></span>
								</span>
							</div>
						</div>
						<div id="continueButton1" style="text-align:center; font-family: 'Poiret One', cursive;"><button type="button" class="btn btn-success btn-lg hvr-bubble-float-right">Next Section</button> </div>
					</div>
					<div class="col-xs-12 col-md-8" id="itemDetailsDiv">
						<legend style="text-align:center" > <span>&#10103;</span> Item Details  </legend>
						<div class="row">
							<div class="col-xs-12 col-md-6">
								<div class="container_details">
									<h5> Item Category</h5>
									<div class="dropdown" id="dropdown-mainCategory">
										<button class="btn btn-default dropdown-toggle" id="category" type="button" data-toggle="dropdown" aria-expanded="false">
											{{itemObject.category_id.category_name}}
											<span class="caret"></span>
										</button>
										<ul class="dropdown-menu" id="mainCategory" role="menu" aria-labelledby="category">
											{% for element in categories %}
												<li role="presentaton" id="cat-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li>
											{% endfor %}
										</ul>
									</div>
								</div>
								<div class="container_details" id="dynamic_ingredient">
									<h5> Item Main Ingredient</h5>
									<div class='dropdown' id='dropdown-mainIngredient'>
										<button class='btn btn-default dropdown-toggle' id='ingredient' type='button' data-toggle='dropdown' aria-expanded='false'>
											{{itemObject.mainItem}} 
											<span class='caret'></span>
										</button>
										<ul class='dropdown-menu' id='mainIngredient' role='menu' aria-labelledby='ingredient'>
											{% for element in categoryOptions %}
												{% if itemObject.category_id.category_id == element.category_id.category_id %}
													<li role='presentaton' id='{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-1' href='#/'>{{element.option_id.option_name}} </a></li>
												{% endif %}
											{% endfor %}
										</ul>
									</div>							
								</div>	
								<div class="container_details containerDiv">
									<h5> Item Container</h5>
									<div class="dropdown" id="dropdown-container">
										<button class="btn btn-default dropdown-toggle" id="container" type="button" data-toggle="dropdown" aria-expanded="false">
											{{itemObject.container_id.container_name}}
										<span class="caret"></span>
										</button>
										<ul class="dropdown-menu" id="mainContainer" role="menu" aria-labelledby="container">
											{% for element in containers %}
												<li role="presentaton" id="cont-{{element.container_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.container_name}} </a></li>
											{% endfor %}
										</ul>
									</div>
								</div>
		

							</div>
							<div class="col-xs-12 col-md-6" id="secondColumn">
								<div class="container_details sizeDiv">
									<h5> Choose a size </h5>
									<div class="dropdown" id="dropdown-size" style="display:inline-flex">
										<button class="btn btn-default dropdown-toggle" id="size" type="button" data-toggle="dropdown" aria-expanded="false">
											{% with itemSizeObjects.0 as mainSize %}
												{{ mainSize.size_id.size_name}}
										<span class="caret"></span>
										</button>
										<ul class="dropdown-menu" id="mainSize" role="menu" aria-labelledby="size">
											{% for element in sizes %}
												<li role="presentaton" id="size-{{element.size_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.size_name}} </a></li>
											{% endfor %}
										</ul>
										{% if mainSize.size_id.size_name == "Count" %}
											<div class="input-group" id="countDiv"><input class="form-control" name="mainCount" value="{{mainSize.item_count}}" placeholder="Ex: 3, 6, 7, ..  pieces" required pattern="\d+"></div>
										{% endif %}
									</div>
									<div id="mainSizePrice">
										<div class="checkbox" style="text-align:center">
											<label><input type="checkbox" id="priceCheckbox">same as Base Price?</label>
										</div>
										<div class="container_details">
											<div class="input-group">
												<div class="input-group-addon">$</div>
												<input class="form-control" id="mainsizeNatural" name="mainSizeNatural" value="{{mainSize.priceIntegers}}" placeholder="0" required pattern="\d+">
												<div class="input-group-addon">.</div>
												<input class="form-control" id="mainsizeFloat" name="mainSizeFloat" value="{{mainSize.priceFloats}}" placeholder="00" required pattern="\d{2}">
											</div>
										</div>
									</div>
											{% endwith %}
								</div>
							</div>
						</div>		
						<div class="row" style="padding-top:5%;text-align:center; font-family: 'Poiret One', cursive">
							<div class="col-xs-12 col-md-3 col-md-offset-1"id="additionalSizeButton"><button type="button" class="btn btn-success btn-lg hvr-icon-float-away">More Sizes</button> </div> 
							<div class="col-xs-12 col-md-4" id="optionalIngredientsButton"><button type="button" class="btn btn-success btn-lg hvr-icon-float-away">Optional Ingredients</button> </div> 
							<div class="col-xs-12 col-md-3" id="mealsButton"><button type="button" class="btn btn-success btn-lg hvr-icon-float-away">Meal Options</button> </div> 
						</div>				
						<div class="row optionalDiv" style="padding-top:50px; padding-left:3%">
							<ul class = "nav nav-tabs	" id="myTabs" style="padding-top: 5%">
								<li id="addSize"><a href = "#tab-AdditionalSize" style="outline:0" data-toggle = "tab">Additional Size</a></li>
								<li id="addIngredient"><a href = "#tab-OptionalIngredients" style="outline:0" data-toggle = "tab">Optional Ingredients</a></li>
								<li id="addMeal"><a href = "#tab-mealOption" style="outline:0" data-toggle = "tab">Meal Options</a></li>
							</ul>
							<div id = "myTabContent" class = "tab-content">
								<div class="tab-pane fade col-xs-12" id="tab-AdditionalSize">
									<table class="table col-xs-12 col-md-6" id="additionalSizeTable">
										<thead>
											<th>#</th>
											<th> Size</th>
											<th>Same Price </th>
											<th> Size Price</th>
										</thead>
										<tbody>
											
										</tbody>
									</table>
									<div>
										<a id="add_size" class="btn btn-default pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Add Size"><i class="fa fa-plus-circle"></i></a>
										<a id="delete_size" class="pull-right btn btn-danger" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Delete Size"><i class="fa fa-minus-circle"></i></a>			
									</div>
								</div>
								<div class="tab-pane fade col-xs-12" id="tab-OptionalIngredients">
									<table class="table col-xs-12 col-md-6" id="optionalIngredientsTable">
										<thead>
										<th> # </th>
										<th> Category</th>
										<th> Ingredient</th>
										<th colspan="2">Fixed or Optional Item </th>
									</thead>
									<tbody>
										
									</tbody>
									</table>
									<div>
										<a id="add_row" class="btn btn-default pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Add Row"><i class="fa fa-plus-circle"></i></a>
										<a id="delete_row" class="pull-right btn btn-danger" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Delete Row"><i class="fa fa-minus-circle"></i></a>			
									</div>
								</div>
								<div class="tab-pane fade col-xs-12 col-md-12" id="tab-mealOption">
									<table class="table" id="mealTable">
										<thead>
											<th> # </th>
											<th> Side Category</th>
											<th> Side Ingredient </th>
											<th> Side Size </th>
											<th> Meal Price </th>
										</thead>
										<tbody>
												
										</tbody>
									</table>
									<div>
										<a id="add_meal" class="btn btn-default pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Add Meal"><i class="fa fa-plus-circle"></i></a>
										<a id="delete_meal" class="pull-right btn btn-danger" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Delete Meal"><i class="fa fa-minus-circle"></i></a>			
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
						<div id="submitButton" style="text-align:center; font-family: 'Poiret One', cursive; padding-top:10%"><button class="btn btn-success btn-lg" type="submit">Update</button> </div>
				<!-- <div id="submitButton" style="text-align:center; font-family: 'Poiret One', cursive; padding-top:20%"><button class="btn btn-danger btn-lg" type="submit">Discard Changes </button> </div> -->
				</div>
			</form>
		</div>
</section>



	<script>
		$(document).ready(function () {
		
			$("#activeBar li").removeClass("active");
			$("#homeActive").addClass("active");
			
			var i = {{optionalIngredients|length}};
			var j = {{mealOptions|length}};
			var k = {{itemSizeCount}} - 1;

			$("#basicInfoDiv").hide();
			$("#itemDetailsDiv").hide();
			$("#addSize").hide();
			$("#addMeal").hide();
			$("#addIngredient").hide();
			$('#submitButton').hide();
			
			if ({{itemSizeCount}} > 1){
				$('#additionalSizeButton').hide();
				$('#addSize').fadeIn('slow');
			}
			
			if ({{optionalIngredients|length}} != 0){
				$('#optionalIngredientsButton').hide();
				$('#addIngredient').fadeIn('slow');
			}
			
			if ({{mealOptions|length}} != 0){
				$('#mealsButton').hide();
				$('#addMeal').fadeIn('slow');
			}
			prepareOptionalIngredients();
			prepareAdditionalSize();
			prepareMeals();
			
			$("#startButton").on("click", function() {
				$('#createLegend').animate({ "right": "+=20%" }, "slow" )
				$('#createLegend').promise().done(function(){
					<!-- $("#createLegend").css("padding-top", "")  -->
					$("#startButton").hide();
					$('#basicInfoDiv').addClass('col-md-offset-4');
					$('#basicInfoDiv').fadeIn('slow');
				});
				
			});
			
			$("#additionalSizeButton").on("click", function() {
				$("#additionalSizeButton").hide();
				$('#addSize').fadeIn('slow');
					
			});
			
			$("#optionalIngredientsButton").on("click", function() {
				$("#optionalIngredientsButton").hide();
				$('#addIngredient').fadeIn('slow');
					
			});
			
			$("#mealsButton").on("click", function() {
				$("#mealsButton").hide();
				$('#addMeal').fadeIn('slow');
					
			});


			$("#continueButton1").on("click", function() {
				$("#continueButton1").hide();
				$('#basicInfoDiv').animate({ "right": "+=33%" }, 1200)
				$('#basicInfoDiv').promise().done(function(){
					$("#basicInfoDiv").css("right", "") 
					$('#basicInfoDiv').removeClass('col-md-offset-4');
					$('#itemDetailsDiv').fadeIn('slow');
					$('#submitButton').show();
				});

			});
			

			

		// Date Time Picker configurations	
			
			 $('#datetimepicker1').datepicker()
				.on('changeDate', function(ev){
					$('#datetimepicker1').datepicker('hide');
			 });
			 
			 	 
			  $('#datetimepicker2').datepicker()
				.on('changeDate', function(ev){
					$('#datetimepicker2').datepicker('hide');
			 });
			 
			 $('#datetimepicker4').timepicker();
			 $('#datetimepicker3').timepicker();


		// popover message boxes on buttons
				 
			$("#addPop").popover({ trigger: "hover" });
			$("#add_row").popover({ trigger: "hover" });
			$("#add_meal").popover({ trigger: "hover" });
			$("#delete_row").popover({ trigger: "hover" });
			$("#delete_meal").popover({ trigger: "hover" });


					// check this function
			$('#myTabs a').click(function () {
				<!-- $('#makeSelection').hide(); -->
				$('body,html').animate({ scrollDown: $('body').height() }, 1200);
				
					if ($(this).attr('href') == ('#tab-OptionalIngredients')){
						$('#tab-OptionalIngredients').show();
						$('#tab-OptionalIngredients').css('padding-top', '5%');
						$('#tab-AdditionalSize').hide();
						$('#tab-AdditionalSize').css('padding-top', '0px');
						$('#tab-mealOption').hide();
						$('#tab-mealOption').css('padding-top', '0px');
					}
					
					if ($(this).attr('href') == ('#tab-AdditionalSize')){
						$('#tab-AdditionalSize').show();
						$('#tab-AdditionalSize').css('padding-top', '5%');
						$('#tab-OptionalIngredients').hide();
						$('#tab-OptionalIngredients').css('padding-top', '0px');
						$('#tab-mealOption').hide();
						$('#tab-mealOption').css('padding-top', '0px');
					}
					
					if ($(this).attr('href') == ('#tab-mealOption')){
						$('#tab-mealOption').show();
						$('#tab-mealOption').css('padding-top', '5%');
						$('#tab-AdditionalSize').hide();
						$('#tab-AdditionalSize').css('padding-top', '0px');
						$('#tab-OptionalIngredients').hide();
						$('#tab-OptionalIngredients').css('padding-top', '0px');
					}

			});
			
			
			
			$("#mainCategory li").on("click", function() {
				//sets button text
				$("#category").text($($(this).find("a")).text())
				var categoryId = $(this).prop('id');
				//removes isSelected class
				$("#mainCategory li a").removeClass("isSelected");

				//add isSlected Class to clicked element
				$($(this).find('a')).addClass("isSelected")
				 var actualID = categoryId.slice(4, categoryId.length)
				$('#postCategory').remove();
				$('#dropdown-mainCategory').append('<input id="postCategory" name="postCategory" value="'+ actualID + '" type="hidden" required>');
				
				return changeMainIngredient(categoryId.slice(4, categoryId.length));
			});
			
		
			
			function changeMainIngredient(id){

				var divPartI = "<h5> Item Main Ingredient</h5><div class='dropdown' id='dropdown-mainIngredient'> <button class='btn btn-default dropdown-toggle' id='ingredient' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='mainIngredient' role='menu' aria-labelledby='ingredient'>";
				{% for element in categoryOptions %}
					
					if (id == {{element.category_id.category_id}})
						divPartI = divPartI +  "<li role='presentaton' id='{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-1' href='#/'>{{element.option_id.option_name}} </a></li>";
				{% endfor %}
				var res = divPartI + "</ul></div>";
				$('#dynamic_ingredient').html(res);
				
				$("#mainIngredient li").on("click", function() {
				//sets button text
				$("#ingredient").text($($(this).find("a")).text())
				//removes isSelected class
				$("#mainIngredient li a").removeClass("isSelected");

				//add isSlected Class to clicked element
				$($(this).find('a')).addClass("isSelected")
	
				var actualID = $(this).prop('id');
				
				$('#postMainIngredient').remove();
				$('#dropdown-mainIngredient').append('<input id="postMainIngredient" name="postMainIngredient" value="'+ actualID + '" type="hidden">');
				
				});
			};
			
			// repeated!
			$("#mainIngredient li").on("click", function() {
				//sets button text
				$("#ingredient").text($($(this).find("a")).text())
				//removes isSelected class
				$("#mainIngredient li a").removeClass("isSelected");

				//add isSlected Class to clicked element
				$($(this).find('a')).addClass("isSelected")
	
				var actualID = $(this).prop('id');
				
				$('#postMainIngredient').remove();
				$('#dropdown-mainIngredient').append('<input id="postMainIngredient" name="postMainIngredient" value="'+ actualID + '" type="hidden">');
				
				});
			

			$("#mainContainer li").on("click", function() {
					//sets button text
					$("#container").text($($(this).find("a")).text())
					//removes isSelected class
					$("#mainContainer li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")	
				
					var cont = $(this).prop('id');
					var actualID = cont.slice(5, cont.length);
					
					$('#postContainer').remove();
					$('#dropdown-container').append('<input id="postContainer" name="postContainer" value="'+ actualID + '" type="hidden">');
				
				
				
				});
			
			
				$("#mainSize li").on("click", function() {
					//sets button text
					$("#size").text($($(this).find("a")).text())
					var sizeText= $(this).text();
					//removes isSelected class
					$("#mainSize li a").removeClass("isSelected");

					
					var additionalSizeIsPressed = false;

									
					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")	
					
					var siz = $(this).prop('id');

					var actualID = siz.slice(5,siz.length);
				
					$('#postMainSize').remove();
					console.log(actualID);
					$('#dropdown-size').append('<input id="postMainSize" name="postMainSize" value="'+ actualID + '" type="hidden">');
				
					<!-- if (!additionalSizeIsPressed){ -->
						<!-- additionalSizeIsPressed = true; -->
						<!-- $("#additionalSizeButton").show(); -->
					<!-- } -->

					
					return checkCount(sizeText);
				});
			
			
			function checkCount(text){
				
				$('#mainSizePrice').remove();
				$('.sizeDiv').append('<div id="mainSizePrice"><div class="checkbox" style="text-align:center"><label><input type="checkbox" id="priceCheckbox">same as Base Price?</label></div><div class="container_details"><div class="input-group"><div class="input-group-addon">$</div><input class="form-control" id="mainsizeNatural" name="mainSizeNatural" placeholder="0" required><div class="input-group-addon">.</div><input class="form-control" id="mainsizeFloat" name="mainSizeFloat" placeholder="00" required></div></div></div>');
				$('#countDiv').remove();
				$('#sameBaseprice').remove();
				$(".optionalDiv").show();

				if (text.trim() == "Count") {
					$('#dropdown-size').append('<div class="input-group" id="countDiv"><input class="form-control" name="mainCount" placeholder="Ex: 3, 6, 7, ..  pieces" required></div>');
				} else {
					$('#countDiv').remove();
				};
				
			
				$('#priceCheckbox').change(function() {
						if ($(this).is(':checked')) {
							$('#mainsizeNatural').val($('#basePriceNatural').val());
							$('#mainsizeFloat').val($('#basePriceFloat').val()); 
						} else {
							$('#mainsizeNatural').val('');
							$('#mainsizeFloat').val('');
						}				
					});
			};
			
			$('#priceCheckbox').change(function() {
						if ($(this).is(':checked')) {
							$('#mainsizeNatural').val($('#basePriceNatural').val());
							$('#mainsizeFloat').val($('#basePriceFloat').val()); 
						} else {
							$('#mainsizeNatural').val('');
							$('#mainsizeFloat').val('');
						}				
					});
			
			
			$("#add_size").click(function(){
				
				 k++;
				$('#additionalSizeTable').append('<tr id="sizeRow-'+ k +'"></tr>');

				$('#sizeRow-'+k).html('<td>' + k  + '</td><td id="addCount-' + k + '"><div class="container_details" id="additionalSizeDropdown-' + k + '"><div class="dropdown" id="dropdown-addSize-' + k + '"><button class="btn btn-default dropdown-toggle" id="addSizeCategory-' + k + '" type="button" data-toggle="dropdown" aria-expanded="false">Size <span class="caret"></span></button><ul class="dropdown-menu" id="addSize-' + k + '" role="menu" aria-labelledby="addSizeCategory-' + k + '">{% for element in sizes %}<li role="presentaton" id="addSize-' + k + '-{{element.size_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.size_name}} </a></li>{% endfor %}</ul></div></div></td>');

			});
			
			$("#delete_size").click(function(){
				if (k>0) {
					$("#sizeRow-"+ k).remove();
					k--;

				 }
			});
			
			$("#add_row").click(function(){
				 i++;
				$('#optionalIngredientsTable').append('<tr id="row-'+ i +'"></tr>');

				$('#row-'+i).html('<td>' + i  + '</td><td><div class="container_details"><div class="dropdown"><button class="btn btn-default dropdown-toggle" id="optionalCategory-' + i + '" type="button" data-toggle="dropdown" aria-expanded="false">Category	<span class="caret"></span></button><ul class="dropdown-menu" id="optionalCatMenu-' + i + '" role="menu" aria-labelledby="optionalCategory-' + i + '">{% for element in categories %}<li role="presentaton" id="optionalCat-' + i + '-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li>{% endfor %}	</ul></div></div></td><td id="optionalIngTd-' + i + '"> </td><td><label class="radio-inline"><input id="selectFixed-' + i + '" type="radio" name="itemIsFixed-' + i + '" value="fixed" required>Fixed</label></td><td id="radioOptional-' + i + '"><label class="radio-inline" style="float:left"><input id="selectOptional-' + i + '" type="radio" name="itemIsFixed-' + i + '" value="optional">Optional</label></td></tr>');

			});
			
			 $("#delete_row").click(function(){
				if (i>0) {
					$("#row-"+ i).remove();
					i--;

				 }
			});
			
			$("#add_meal").click(function(){
				
				 j++;
				$('#mealTable').append('<tr id="mealRow-'+ j +'"></tr>');

				$('#mealRow-'+j).html('<td>' + j  + '</td><td><div class="container_details"><div class="dropdown"><button class="btn btn-default dropdown-toggle" id="sideCategory-'+ j + '" type="button" data-toggle="dropdown" aria-expanded="false">Category<span class="caret"></span></button><ul class="dropdown-menu" id="sideCatMenu-'+ j + '" role="menu" aria-labelledby="sideCategory-'+ j + '">{% for element in categories %} <li role="presentaton" id="sideCat-'+ j + '-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li> {% endfor %}</ul></div></div></td><td id="sideIngTd-'+ j + '"> </td><td id="sideSizeDiv-' + j + '"><div class="container_details" id="sideSizeDropdown-' + j + '"><div class="dropdown" id="dropdown-sideSize-' + j + '"><button class="btn btn-default dropdown-toggle" id="sideSize-'+ j + '" type="button" data-toggle="dropdown" aria-expanded="false">Size <span class="caret"></span></button><ul class="dropdown-menu" id="sideSizeMenu-'+ j + '" role="menu" aria-labelledby="sideSize-'+ j + '">{% for element in sizes %}<li role="presentaton" id="side-size-'+ j + '-{{element.size_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.size_name}} </a></li>{% endfor %}</ul></div></div></td><td style="width:30%"><div class="input-group" id="mealPrice-'+ j + '"><div class="input-group-addon">$</div><input class="form-control" name="mealNatural-' + j + '" placeholder="Ex: 2 dollars"><div class="input-group-addon">.</div><input class="form-control" name="mealFloat-'+ j + '" placeholder="Ex: 90 Cents"></div></td>');
			
			});
			
			$("#delete_meal").click(function(){
				if (j>0) {
					$("#mealRow-"+ j).remove();
					j--;

				 }
			});
			
			
			
			
			$(document).click(function(){
				
				$("a").click(function(event) {
						
					if ($(event.target).parent().attr('id').split('-')[0] == 'addSize') {
						
						var k = $(event.target).parent().attr('id').split('-')[1] 
					
						$("#addSize-" + k + " li").on("click", function() {
							//sets button text
							$("#addSizeCategory-" + k).text($($(this).find("a")).text())
							var categoryId = $(this).prop('id');
							//removes isSelected class
							$("#addSize-" + k +" li a").removeClass("isSelected");

							//add isSlected Class to clicked element
							$($(this).find('a')).addClass("isSelected")
							
							var sizeText= $(this).text();
							var ing= $(this).prop('id');
							console.log(ing);
							var actualID = ing.split('-')[2];
						
							console.log(actualID);
							
							$('#postAddSize-' + k).remove();
							$('#dropdown-addSize-' + k).append('<input id="postAddSize-' + k + '" name="postAddSize-' + k + '" value="'+ actualID + '" type="hidden">');
					
						
							return checkCount(sizeText);
						});
				
						function checkCount(text){
							
							$('#sameBasepriceTd-' + k).remove();
							$('#addSizePriceTd-' + k).remove();
							$('#additionalCount-' + k).remove();
							$('#sizeRow-' + k).append('<td id="sameBasepriceTd-' + k + '"><div class="checkbox" style="text-align:center"><label><input type="checkbox" id="addSizePriceCheckbox-' + k + '">same as Base Price?</label></div></td><td id="addSizePriceTd-' + k + '"><div class="input-group"><div class="input-group-addon">$</div><input class="form-control" id="addSizeNatural-'+ k + '" name="addSizeNatural-' + k + '" placeholder="0"><div class="input-group-addon">.</div><input class="form-control" id="addSizeFloat-'+ k + '" name="addSizeFloat-'+ k + '" placeholder="00"></div></td>');

							
							if (text.trim() == "Count") {
								$('#additionalSizeDropdown-' + k).css('float' , 'left');
								$('#addCount-' + k).append('<div class="input-group" style="padding-left:20px" id="additionalCount-' + k + '"><input class="form-control" name="additionalSizeCount-'+ k  + '" placeholder="Ex: 3, 6, 7, .. " required></div>');
							}
			
							$('#addSizePriceCheckbox-' + k).change(function() {
								if ($(this).is(':checked')) {
									$('#addSizeNatural-' + k).val($('#basePriceNatural').val());
									$('#addSizeFloat-' + k).val($('#basePriceFloat').val()); 
								} else {
									$('#addSizeNatural-' + k).val('');
									$('#addSizeFloat-' + k).val('');
								}				
							});
						
						};
		  
				} else if ($(event.target).parent().attr('id').split('-')[0] == 'optionalCat') {
						
						var i = $(event.target).parent().attr('id').split('-')[1] 
			
						$("#optionalCatMenu-" + i + " li").on("click", function() {
						//sets button text
							$("#optionalCategory-" + i).text($($(this).find("a")).text())
							var categoryId = $(this).prop('id');
							//removes isSelected class
							$("#optionalCatMenu-" + i +" li a").removeClass("isSelected");

							//add isSlected Class to clicked element
							$($(this).find('a')).addClass("isSelected")
							
							return changeOptionalIngredient(categoryId.split('-')[2]);
						});
				
				
						function changeOptionalIngredient(id){
							var divPartI = "<div class='dropdown' id='dropdown-ing-" + i + "'><button class='btn btn-default dropdown-toggle' id='optionalIngredient-" + i + "' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='optionalIngMenu-"+ i + "' role='menu' aria-labelledby='optionalIngredient-" + i + "'>";
							{% for element in categoryOptions %}
								
								if (id == {{element.category_id.category_id}})
									divPartI = divPartI +  "<li role='presentaton' id='optional-" + i + "-{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-" + i + "' href='#/'>{{element.option_id.option_name}} </a></li>";
							{% endfor %}
							var res = divPartI + "</ul></div>";
							
							document.getElementById("optionalIngTd-" + i).innerHTML =  res;

							$("#optionalIngMenu-" + i + " li").on("click", function() {
							//sets button text
							$("#optionalIngredient-" + i).text($($(this).find("a")).text())
							//removes isSelected class
							$("#optionalIngMenu-" + i + " li a").removeClass("isSelected");

							//add isSlected Class to clicked element
							$($(this).find('a')).addClass("isSelected")
								
							var ing= $(this).prop('id');

							var actualID = ing.split('-')[2];
						
							$('#postIng-' + i).remove();
							$('#dropdown-ing-' + i).append('<input id="postIng-' + i + '" name="postIng-' + i + '" value="'+ actualID + '" type="hidden">');
						
							});
						};
						
						$("#selectOptional-" + i).on("click", function() {
							//sets button text
							$("#additionalPrice-" + i).remove();
							$('#radioOptional-' + i).append('<div class="input-group" id="additionalPrice-' + i + '" style="padding-left:20px"><div class="input-group-addon" >Additional Price $</div><input class="form-control" name="ingPriceNatural-' + i + '" placeholder="0" required><div class="input-group-addon">.</div><input class="form-control" name="ingPriceFloat-' + i + '" placeholder="00" required></div>');
						});
						
						$("#selectFixed-" + i).on("click", function() {
							//sets button text
							$("#additionalPrice-" + i).remove();
						});
					  
				} else if ($(event.target).parent().attr('id').split('-')[0] == 'sideCat') {
						
						var j = $(event.target).parent().attr('id').split('-')[1] 
			
			
						$("#sideCatMenu-" + j + " li").on("click", function() {
						//sets button text
							$("#sideCategory-" + j).text($($(this).find("a")).text())
							var categoryId = $(this).prop('id');
							//removes isSelected class
							$("#sideCatMenu-" + j +" li a").removeClass("isSelected");

							//add isSlected Class to clicked element
							$($(this).find('a')).addClass("isSelected")
							
							return changeSideIngredient(categoryId.split('-')[2]);
						});
					
						function changeSideIngredient(id){
							var divPartI = "<div class='dropdown' id='dropdown-sideIng-" + j + "'><button class='btn btn-default dropdown-toggle' id='sideIngredient-" + j + "' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='sideIngMenu-"+ j + "' role='menu' aria-labelledby='sideIngredient-" + j + "'>";
							{% for element in categoryOptions %}
								
								if (id == {{element.category_id.category_id}})
									divPartI = divPartI +  "<li role='presentaton' id='side-" + j + "-{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-" + j + "' href='#/'>{{element.option_id.option_name}} </a></li>";
							{% endfor %}
							var res = divPartI + "</ul></div>";
							
							$('#sideIngTd-' + j).html(res);

							$("#sideIngMenu-" + j + " li").on("click", function() {
							//sets button text
								$("#sideIngredient-" + j).text($($(this).find("a")).text())
								//removes isSelected class
								$("#sideIngMenu-" + j + " li a").removeClass("isSelected");

								//add isSlected Class to clicked element
								
								$($(this).find('a')).addClass("isSelected")
								
							
								var ing= $(this).prop('id');
								console.log(ing);
								var actualID = ing.split('-')[2];
								
								$('#postSideIng-' + j).remove();
								$('#dropdown-sideIng-' + j).append('<input id="postSideIng-' + j + '" name="postSideIng-' + j + '" value="'+ actualID + '" type="hidden">');
						
							});
						};
				
				
						$("#sideSizeMenu-" + j + " li").on("click", function() {
							//sets button text
							$("#sideSize-" + j).text($($(this).find("a")).text())
							var sizeText= $(this).text();
							//removes isSelected class
							$("#sideSizeMenu-" + j + " li a").removeClass("isSelected");

							//add isSlected Class to clicked element
							$($(this).find('a')).addClass("isSelected")	
							
							var ing= $(this).prop('id');

							var actualID = ing.split('-')[3];
						
							$('#postSideSize-' + j).remove();
							$('#dropdown-sideSize-' + j).append('<input id="postSideSize-' + j + '" name="postSideSize-' + j + '" value="'+ actualID + '" type="hidden">');
						
							
							return checkCount(sizeText);
						});

						function checkCount(text){
							if (text.trim() == "Count") {
								$('#sideSizeDropdown-' + j).css('float' , 'left');
								$('#sideSizeDiv-' + j).append('<div class="input-group" style="padding-left:20px" id="sideCount-' + j + '"><input class="form-control" name="countMeal-'+ j  + '" placeholder="Ex: 3, 6, 7, .. " required></div>');
							} else {
								$('#sideSizeDropdown-' + j).css('transform' , '');
								$('#sideCount-' + j).remove();
							}
					
						};
			
				
				};
			});
			});
			
			
			function prepareAdditionalSize(){
						var i = 0;
					{% for itemSizeElement in itemSizeObjects %}
						{% if not forloop.counter == 1 %}
							i++;
							$('#additionalSizeTable').append('<tr id="sizeRow-'+ i +'"></tr>');

							$('#sizeRow-'+i).html('<td>' + i  + '</td><td id="addCount-' + i + '"><div class="container_details" id="additionalSizeDropdown-' + i + '"><div class="dropdown" id="dropdown-addSize-' + i + '"><button class="btn btn-default dropdown-toggle" id="addSizeCategory-' + i + '" type="button" data-toggle="dropdown" aria-expanded="false">{{itemSizeElement.size_id.size_name}} <span class="caret"></span></button><ul class="dropdown-menu" id="addSize-' + i + '" role="menu" aria-labelledby="addSizeCategory-' + i + '">{% for element in sizes %}<li role="presentaton" id="addSize-' + i + '-{{element.size_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.size_name}} </a></li>{% endfor %}</ul></div></div></td>');

							$("#addSize-" + i + " li").on("click", function() {
								//sets button text
								$("#addSizeCategory-" + i).text($($(this).find("a")).text())
								var categoryId = $(this).prop('id');
								//removes isSelected class
								$("#addSize-" + i +" li a").removeClass("isSelected");

								//add isSlected Class to clicked element
								$($(this).find('a')).addClass("isSelected")
								
								var sizeText= $(this).text();
								var ing= $(this).prop('id');
								console.log(ing);
								var actualID = ing.split('-')[2];
							
								console.log(actualID);
								
								$('#postAddSize-' + i).remove();
								$('#dropdown-addSize-' + i).append('<input id="postAddSize-' + i + '" name="postAddSize-' + i + '" value="'+ actualID + '" type="hidden">');
						
							
								return checkCount(sizeText);
							});
						
							function checkCount(text){
							
							$('#sameBasepriceTd-' + i).remove();
							$('#addSizePriceTd-' + i).remove();
							$('#additionalCount-' + i).remove();
							$('#sizeRow-' + i).append('<td id="sameBasepriceTd-' + i + '"><div class="checkbox" style="text-align:center"><label><input type="checkbox" id="addSizePriceCheckbox-' + i + '">same as Base Price?</label></div></td><td id="addSizePriceTd-' + i + '"><div class="input-group"><div class="input-group-addon">$</div><input class="form-control" id="addSizeNatural-'+ i + '" name="addSizeNatural-' + i + '" placeholder="0"><div class="input-group-addon">.</div><input class="form-control" id="addSizeFloat-'+ i + '" name="addSizeFloat-'+ i + '" placeholder="00"></div></td>');

							
							if (text.trim() == "Count") {
								$('#additionalSizeDropdown-' + i).css('float' , 'left');
								$('#addCount-' + i).append('<div class="input-group" style="padding-left:20px" id="additionalCount-' + i + '"><input class="form-control" name="additionalSizeCount-'+ i  + '" placeholder="Ex: 3, 6, 7, .. " required></div>');
							}
			
							$('#addSizePriceCheckbox-' + i).change(function() {
								if ($(this).is(':checked')) {
									$('#addSizeNatural-' + i).val($('#basePriceNatural').val());
									$('#addSizeFloat-' + i).val($('#basePriceFloat').val()); 
								} else {
									$('#addSizeNatural-' + i).val('');
									$('#addSizeFloat-' + i).val('');
								}				
							});
						
							};

							if ("{{itemSizeElement.size_id.size_name}}" == "Count") {
								$('#additionalSizeDropdown-' + i).css('float' , 'left');
								$('#addCount-' + i).append('<div class="input-group" style="padding-left:20px" id="additionalCount-' + i + '"><input class="form-control" name="additionalSizeCount-'+ i  + '" value="{{itemSizeElement.item_count}}" 	placeholder="Ex: 3, 6, 7, .. " required></div>');
							}
							$('#sizeRow-' + i).append('<td id="sameBasepriceTd-' + i + '"><div class="checkbox" style="text-align:center"><label><input type="checkbox" id="addSizePriceCheckbox-' + i + '">same as Base Price?</label></div></td><td id="addSizePriceTd-' + i + '"><div class="input-group"><div class="input-group-addon">$</div><input class="form-control" id="addSizeNatural-'+ i + '" value="{{itemSizeElement.priceIntegers}}" name="addSizeNatural-' + i + '" placeholder="0"><div class="input-group-addon">.</div><input class="form-control" id="addSizeFloat-'+ i + '" value="{{itemSizeElement.priceFloats}}" name="addSizeFloat-'+ i + '" placeholder="00"></div></td>');
							$('#addSizePriceCheckbox-' + i).change(function() {
								if ($(this).is(':checked')) {
									$('#addSizeNatural-' + i).val($('#basePriceNatural').val());
									$('#addSizeFloat-' + i).val($('#basePriceFloat').val()); 
								} else {
									$('#addSizeNatural-' + i).val('');
									$('#addSizeFloat-' + i).val('');
								}				
							});
							
							$('#postAddSize-' + i).remove();
							$('#dropdown-addSize-' + i).append('<input id="postAddSize-' + i + '" name="postAddSize-' + i + '" value="'+ {{itemSizeElement.size_id.size_id}} + '" type="hidden">');
						{% endif %}
				{% endfor %}
			};
			
			function prepareOptionalIngredients(){
				
				var i = 0;
					{% for key, value in optionalIngredients.items %}
						 i++;
						$('#optionalIngredientsTable').append('<tr id="row-'+ i +'"></tr>');
						$('#row-'+i).html('<td>' + i  + '</td><td><div class="container_details"><div class="dropdown"><button class="btn btn-default dropdown-toggle" id="optionalCategory-' + i + '" type="button" data-toggle="dropdown" aria-expanded="false">{{value.categoryObject.category_name}}<span class="caret"></span></button><ul class="dropdown-menu" id="optionalCatMenu-' + i + '" role="menu" aria-labelledby="optionalCategory-' + i + '">{% for element in categories %}<li role="presentaton" id="optionalCat-' + i + '-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li>{% endfor %}</ul></div></div></td><td id="optionalIngTd-' + i + '"><div class="dropdown" id="dropdown-ing-' + i + '"><button class="btn btn-default dropdown-toggle" id="optionalIngredient-' + i + '" type="button" data-toggle="dropdown" aria-expanded="false">{{value.optionObject.option_name}}<span class="caret"></span></button><ul class="dropdown-menu" id="optionalIngMenu-' + i + '" role="menu" aria-labelledby="optionalIngredient-' + i + '">{% for element in categoryOptions %}{% if value.categoryObject.category_id == element.category_id.category_id %}<li role="presentaton" id="optional-' + i + '-{{element.option_id.option_id}}" ><a role="menuitem" tabindex="-' + i + '" href="#/">{{element.option_id.option_name}} </a></li>{% endif %}{% endfor %}</ul></div></td><td><label class="radio-inline"><input id="selectFixed-' + i + '" type="radio" name="itemIsFixed-' + i + '" value="fixed" required>Fixed</label></td><td id="radioOptional-' + i + '"><label class="radio-inline" style="float:left"><input id="selectOptional-' + i + '" type="radio" name="itemIsFixed-' + i + '" value="optional">Optional</label></td></tr>');
						if ('{{value.optionStatus}}' == "fixed"){
							$('#selectFixed-' + i).prop("checked", true);
						} else {
							$('#selectOptional-' + i).prop("checked", true);
							if ({{value.optionPrice}} != 0) {
							var ingPriceNatural = {{value.optionPrice}}/100 >> 0
								var ingPriceFloat = "{{value.optionPrice}}".slice(-2); 
								
							} 
							else {
										var ingPriceNatural = 0;
										var ingPriceFloat = 0;
							}
							
						$('#radioOptional-' + i).append('<div class="input-group" id="additionalPrice-' + i + '" style="padding-left:20px"><div class="input-group-addon">Additional Price $</div><input class="form-control" name="ingPriceNatural-' + i + '" value="' + ingPriceNatural + '" placeholder="0" required><div class="input-group-addon">.</div><input class="form-control" name="ingPriceFloat-' + i + '" value="' + ingPriceFloat + '" placeholder="00" required></div>');


						}
							$("#optionalCatMenu-" + i + " li").on("click", function() {
								//sets button text
								$("#optionalCategory-" + i).text($($(this).find("a")).text())
								var categoryId = $(this).prop('id');
								//removes isSelected class
								$("#optionalCatMenu-" + i +" li a").removeClass("isSelected");

								//add isSlected Class to clicked element
								$($(this).find('a')).addClass("isSelected")
								
								return changeOptionalIngredient(categoryId.slice(15, categoryId.length));
							});
						
						function changeOptionalIngredient(id){
							var divPartI = "<div class='dropdown' id='dropdown-ing-" + i + "'><button class='btn btn-default dropdown-toggle' id='optionalIngredient-" + i + "' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='optionalIngMenu-"+ i + "' role='menu' aria-labelledby='optionalIngredient-" + i + "'>";
							{% for element in categoryOptions %}
								
								if (id == {{element.category_id.category_id}})
									divPartI = divPartI +  "<li role='presentaton' id='optional-" + i + "-{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-" + i + "' href='#/'>{{element.option_id.option_name}} </a></li>";
							{% endfor %}
							var res = divPartI + "</ul></div>";
							
							document.getElementById("optionalIngTd-" + i).innerHTML =  res;

							$("#optionalIngMenu-" + i + " li").on("click", function() {
							//sets button text
							$("#optionalIngredient-" + i).text($($(this).find("a")).text())
							//removes isSelected class
							$("#optionalIngMenu-" + i + " li a").removeClass("isSelected");

							//add isSlected Class to clicked element
							$($(this).find('a')).addClass("isSelected")
								
							var ing= $(this).prop('id');

							var actualID = ing.split('-')[2];
						
							$('#postIng-' + i).remove();
							$('#dropdown-ing-' + i).append('<input id="postIng-' + i + '" name="postIng-' + i + '" value="'+ actualID + '" type="hidden">');
						
							});
						};
						
						$("#selectOptional-" + i).on("click", function() {
							//sets button text
							
							$('#radioOptional-' + i).append('<div class="input-group" id="additionalPrice-' + i + '" style="padding-left:20px"><div class="input-group-addon">Additional Price $</div><input class="form-control" name="ingPriceNatural-' + i + '" placeholder="0" required><div class="input-group-addon">.</div><input class="form-control" name="ingPriceFloat-' + i + '" placeholder="00" required></div>');
						});
						
						$("#selectFixed-" + i).on("click", function() {
							//sets button text
							$("#additionalPrice-" + i).remove();
						});
						
						$('#postIng-' + i).remove();
						$('#dropdown-ing-' + i).append('<input id="postIng-' + i + '" name="postIng-' + i + '" value="'+ {{value.optionObject.option_id}} + '" type="hidden">');
					{% endfor %}  
			};	  

			function prepareMeals() {
				var i = 0;
				{% for key, value in mealOptions.items %}
					i++;
				$('#mealTable').append('<tr id="mealRow-'+ i +'"></tr>');
				
				if ({{value.mealPrice}} != 0) {
					var mealNatural = ({{value.mealPrice}}/100) >> 0
					var mealFloat = "{{value.mealPrice}}".slice(-2); 
				}	
				else {
					var mealNatural = 0;
					var mealFloat = 0;
				}
				
				
			$('#mealRow-'+i).html('<td>' + i  + '</td><td><div class="container_details"><div class="dropdown"><button class="btn btn-default dropdown-toggle" id="sideCategory-'+ i + '" type="button" data-toggle="dropdown" aria-expanded="false">{{value.categoryObject.category_name}}<span class="caret"></span></button><ul class="dropdown-menu" id="sideCatMenu-'+ i + '" role="menu" aria-labelledby="sideCategory-'+ i + '">{% for element in categories %} <li role="presentaton" id="sideCat-'+ i + '-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li> {% endfor %}</ul></div></div></td><td id="sideIngTd-'+ i + '"><div class="dropdown" id="dropdown-sideIng-'  + i + '"><button class="btn btn-default dropdown-toggle" id="sideIngredient-' + i + '" type="button" data-toggle="dropdown" aria-expanded="false">{{value.optionObject.option_name}}<span class="caret"></span></button><ul class="dropdown-menu" id="sideIngMenu-' + i + '" role="menu" aria-labelledby="sideIngredient-' + i + '">{% for element in categoryOptions %}{% if value.categoryObject.category_id == element.category_id.category_id %}<li role="presentaton" id="side-' + i + '-{{element.option_id.option_id}}" ><a role="menuitem" tabindex="-' + i + '" href="#/">{{element.option_id.option_name}} </a></li>{% endif %}{% endfor %}</ul></div></td><td id="sideSizeDiv-' + i + '"><div class="container_details" id="sideSizeDropdown-' + i + '"><div class="dropdown" id="dropdown-sideSize-' + i + '"><button class="btn btn-default dropdown-toggle" id="sideSize-'+ i + '" type="button" data-toggle="dropdown" aria-expanded="false">{{value.sizeObject.size_name}} <span class="caret"></span></button><ul class="dropdown-menu" id="sideSizeMenu-'+ i + '" role="menu" aria-labelledby="sideSize-'+ i + '">{% for element in sizes %}<li role="presentaton" id="side-size-'+ i + '-{{element.size_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.size_name}} </a></li>{% endfor %}</ul></div></div></td><td style="width:30%"><div class="input-group" id="mealPrice-'+ i + '"><div class="input-group-addon">$</div><input class="form-control" name="mealNatural-' + i + '" value="' + mealNatural + '" placeholder="Ex: 2 dollars"><div class="input-group-addon">.</div><input class="form-control" name="mealFloat-'+ i + '" value="' + mealFloat + '"placeholder="Ex: 90 Cents"></div></td>');
							
				$("#sideCatMenu-" + i + " li").on("click", function() {
						//sets button text
						$("#sideCategory-" + i).text($($(this).find("a")).text())
						var categoryId = $(this).prop('id');
						//removes isSelected class
						$("#sideCatMenu-" + i +" li a").removeClass("isSelected");

						//add isSlected Class to clicked element
						$($(this).find('a')).addClass("isSelected")
						
						return changeSideIngredient(categoryId.slice(11, categoryId.length));
					});

				function changeSideIngredient(id){
					var divPartI = "<div class='dropdown' id='dropdown-sideIng-" + i + "'><button class='btn btn-default dropdown-toggle' id='sideIngredient-" + i + "' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='sideIngMenu-"+ i + "' role='menu' aria-labelledby='sideIngredient-" + i + "'>";
					{% for element in categoryOptions %}
						
						if (id == {{element.category_id.category_id}})
							divPartI = divPartI +  "<li role='presentaton' id='side-" + i + "-{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-" + i + "' href='#/'>{{element.option_id.option_name}} </a></li>";
					{% endfor %}
					var res = divPartI + "</ul></div>";
					
					$('#sideIngTd-' + i).html(res);

					$("#sideIngMenu-" + i + " li").on("click", function() {
					//sets button text
					$("#sideIngredient-" + i).text($($(this).find("a")).text())
					//removes isSelected class
					$("#sideIngMenu-" + i + " li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					
					$($(this).find('a')).addClass("isSelected")
					
				
					var ing= $(this).prop('id');
					console.log(ing);
					var actualID = ing.split('-')[2];
					
					$('#postSideIng-' + i).remove();
					$('#dropdown-sideIng-' + i).append('<input id="postSideIng-' + i + '" name="postSideIng-' + i + '" value="'+ actualID + '" type="hidden">');
				
					});
				};
				
				
				$("#sideSizeMenu-" + i + " li").on("click", function() {
					//sets button text
					$("#sideSize-" + i).text($($(this).find("a")).text())
					var sizeText= $(this).text();
					//removes isSelected class
					$("#sideSizeMenu-" + i + " li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")	
					
					var ing= $(this).prop('id');

					var actualID = ing.split('-')[3];
				
					$('#postSideSize-' + i).remove();
					$('#dropdown-sideSize-' + i).append('<input id="postSideSize-' + i + '" name="postSideSize-' + i + '" value="'+ actualID + '" type="hidden">');
				
					
					return checkCount(sizeText);
				});

				function checkCount(text){
					if (text.trim() == "Count") {
						$('#sideSizeDropdown-' + i).css('float', 'left');
						$('#sideSizeDiv-' + i).append('<div class="input-group" style="padding-left:20px" id="sideCount-' + i + '"><input class="form-control" name="countMeal-'+ i  + '" placeholder="Ex: 3, 6, 7, .. " required></div>');
					} else {
						$('#sideSizeDropdown-' + i).css('transform' , '');
						$('#sideCount-' + i).remove();
					}
			
				};
		
				
				$('#postSideSize-' + i).remove();
				$('#dropdown-sideSize-' + i).append('<input id="postSideSize-' + i + '" name="postSideSize-' + i + '" value="'+ {{value.sizeObject.size_id}} + '" type="hidden">');
				
				$('#postSideIng-' + j).remove();
				$('#dropdown-sideIng-' + j).append('<input id="postSideIng-' + j + '" name="postSideIng-' + j + '" value="'+ {{value.categoryObject.category_id}} + '" type="hidden">');
				{% endfor %}
				
			};
			
			
		});

		
	   
	</script>
	<div style="padding-top:5%"></div>
{% endblock %}	