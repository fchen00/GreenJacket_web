{% extends "base.html" %}
{% block content %}
	<style>
	
		.dropdown-menu {z-index:1050;}

		.container_details {text-align: center}
		.GJButton{ border-color:#2C8A64; background-color: #2C8A64; background-image:none; outline:none;  font-family: 'Poiret One', cursive;}
		.GJButton:hover, .GJButton:focus, .GJButton:active { border-color: #/FED136; background-color: #FED136; transition:all 0.5s; outline:none;  font-family: 'Poiret One', cursive;}
		.btn-success{ border-color:#2C8A64; background-color: #2C8A64; background-image:none; outline:none; font-family: 'Poiret One', cursive;}
		.btn-success:hover , .btn-success:focus, .btn-success:active { border-color: #19E794; background-color: #19E794; transition:all 0.5s; outline:none; font-family: 'Poiret One', cursive;}
	</style>
	<section>
		<div class="container" style="padding-bottom:5%">
			<div id="createLegend">
				<h2 style="text-align:center"> Create an item </h2> 
				<!-- <legend style="font-size:50px; text-align:center;" > Create an item  </legend> -->
			</div>
			<div id="startButton" style="text-align:center; font-family: 'Poiret One', cursive;"><button type="button" class="btn btn-success btn-lg">Start</button> </div>

<!-- 			{% for message in messages %}
				<div class="alert alert-{{ message.tags }}">{{ message }}</div>
			{% endfor %} -->
			<form action="/GJ_app/createItem/{{comp_id}}/" method="POST"> {% csrf_token %}
				<div class="row">
					<div class="col-xs-12 col-md-4" id="basicInfoDiv">
						<legend style="text-align:center" > (1) Basic Info  </legend>
						<div class="form-group">
							<label for="nickNameEdit">Item Nickname</label>
							<div class="input-group" style="width:100%">
								<input class="form-control" name="nickNameNew" placeholder="Ex: Big Mac, Egg Muffin, Ultimate Supreme Pizza, .." required>
							</div>
						</div>
						<div class="form-group">
							<label for="basePriceEdit">Base Price* </label>
							<div class="input-group">
								<div class="input-group-addon">$</div>
								<input class="form-control" id="basePriceNatural" name="basePriceNatural" placeholder="Ex: 2 dollars" required pattern="\d+">
								<div class="input-group-addon">.</div>
								<input class="form-control" id="basePriceFloat" name="basePriceFloat" placeholder="Ex: 90 cents" required pattern="\d{2}">
							</div>
						</div>
						<div class="form-group">
							<label for="startDateEdit">Item Start Date</label>
							<div class='input-group date' id='datetimepicker1' data-date="{{item.item_id.item_startDate}}" data-date-format="mm-dd-yyyy">
								<input type='text' class="form-control" name="startDateNew"  id="startDateEdit" required pattern="(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])-[0-9]{4}">
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-calendar"></span>
								</span>
							</div>
						</div>
						<div class="form-group">
							<label for="endDateEdit">Item End Date</label>
							<div class='input-group date' id='datetimepicker2' data-date="{{item.item_id.item_startDate}}" data-date-format="mm-dd-yyyy">
								<input type='text' class="form-control" name="endDateNew" id="endDateEdit"  required pattern="(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])-[0-9]{4}">
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-calendar"></span>
								</span>
							</div>
						</div><div class="form-group">
							<label for="startTimeEdit">Item Start Time</label>
							<div class='input-group bootstrap-timepicker timepicker'>
								<input type='text' class="form-control" name="startTimeNew" id='datetimepicker3' data-provide="timepicker" data-minute-step="15" />
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-time"></span>
								</span>
							</div>
						</div><div class="form-group">
							<label for="endTimeEdit">Item End Time</label>
							<div class='input-group bootstrap-timepicker timepicker'>
								<input type='text' class="form-control" name="endTimeNew" id='datetimepicker4' data-provide="timepicker" data-minute-step="15" />
								<span class="input-group-addon">
									<span class="glyphicon glyphicon-time"></span>
								</span>
							</div>
						</div>
						<div id="continueButton1" style="text-align:center; font-family: 'Poiret One', cursive;"><button type="button" class="btn btn-success btn-lg hvr-bubble-float-right">Next Section</button> </div>
					</div>
					<div class="col-xs-12 col-md-8" id="itemDetailsDiv">
						<legend style="text-align:center" > (2) Item Details  </legend>
						<div class="row">
							<div class="col-xs-12 col-md-6">
								<div class="container_details">
									<h5> Item Category</h5>
									<div class="dropdown" id="dropdown-mainCategory">
										<button class="btn btn-default dropdown-toggle" id="category" type="button" data-toggle="dropdown" aria-expanded="false">
											Category
											<span class="caret"></span>
										</button>
										<ul class="dropdown-menu" id="mainCategory" role="menu" aria-labelledby="category">
											{% for element in categories %}
												<li role="presentaton" id="cat-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li>
											{% endfor %}
										</ul>
									</div>
								</div>
								<div class="container_details" id="dynamic_ingredient"></div>	
								<div class="container_details containerDiv">
									<h5> Item Container</h5>
									<div class="dropdown" id="dropdown-container">
										<button class="btn btn-default dropdown-toggle" id="container" type="button" data-toggle="dropdown" aria-expanded="false">
											Container
										<span class="caret"></span>
										</button>
										<ul class="dropdown-menu" id="mainContainer" role="menu" aria-labelledby="container">
											{% for element in containers %}
												<li role="presentaton" id="cont-{{element.container_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.container_name}} </a></li>
											{% endfor %}
										</ul>
									</div>
								</div>
		

							</div>
							<div class="col-xs-12 col-md-6" id="secondColumn">
								<div class="container_details sizeDiv">
									<h5> Choose a size </h5>
									<div class="dropdown" id="dropdown-size">
										<button class="btn btn-default dropdown-toggle" id="size" type="button" data-toggle="dropdown" aria-expanded="false">
											Size
										<span class="caret"></span>
										</button>
										<ul class="dropdown-menu" id="mainSize" role="menu" aria-labelledby="size">
											{% for element in sizes %}
												<li role="presentaton" id="size-{{element.size_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.size_name}} </a></li>
											{% endfor %}
										</ul>
									</div>
								</div>
								<div id="additionalSizeButton" style="text-align:center; font-family: 'Poiret One', cursive"><button type="button" class="btn btn-success btn-lg hvr-icon-float-away">Add More Sizes</button> </div> 

								<div class="row" id="additionalSizeDiv">
									<h5> Additional Size </h5>
									<table class="table table-hover col-xs-12 col-md-6" id="additionalSizeTable">
										<thead>
											<th> </th>
											<th> </th>
											<th> </th>
											<th> </th>
										</thead>
										<tbody>
											
										</tbody>
									</table>
									<div style="padding-bottom:40%" >
										<a id="add_size" class="btn btn-default pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Add Size"><i class="fa fa-plus-circle"></i></a>
										<a id="delete_size" class="pull-right btn btn-danger" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Delete Size"><i class="fa fa-minus-circle"></i></a>			
									</div>
								</div>
							</div>
						</div>
						<div class="row optionalDiv" style="padding-top:50px; padding-left:20%">
							<h5> Optional Ingredients </h5>
							<table class="table table-hover col-xs-12 col-md-6" id="optionalIngredientsTable">
								<thead>
									<th> </th>
									<th> </th>
									<th> </th>
									<th> </th>
									<th> </th>
								</thead>
								<tbody>
									
								</tbody>
							</table>
							<div style="padding-bottom:40%" >
								<a id="add_row" class="btn btn-default pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Add Row"><i class="fa fa-plus-circle"></i></a>
								<a id="delete_row" class="pull-right btn btn-danger" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Delete Row"><i class="fa fa-minus-circle"></i></a>			
							</div>
							<div id="continueButton2" style="text-align:center; font-family: 'Poiret One', cursive"><button type="button" class="btn btn-success btn-lg hvr-bubble-float-bottom">Meal Section</button> </div>
						</div>
					</div>
				</div>
				<div class="col-xs-12 col-md-12" id="mealOptionsDiv" style="padding-top:5%">
					<legend style="text-align:center" > (3) Meal Options </legend>
					<table class="table table-hover" id="mealTable">
						<thead>
							<th> # </th>
							<th> Side Category</th>
							<th> Side Ingredient </th>
							<th> Side Size </th>
							<th> Meal Price </th>
						</thead>
						<tbody>
								
						</tbody>
					</table>
					<div class="col'">
						<a id="add_meal" class="btn btn-default pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Add Meal"><i class="fa fa-plus-circle"></i></a>
						<a id="delete_meal" class="pull-right btn btn-danger" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="Delete Meal"><i class="fa fa-minus-circle"></i></a>			
					</div>
				</div>
				<div id="submitButton" style="text-align:center; font-family: 'Poiret One', cursive; padding-top:20%"><button class="btn btn-success btn-lg" type="submit">Create</button> </div>
			</form>
		</div>
	</section>



	<script>
		$(document).ready(function () {
		
		
			$("#activeBar li").removeClass("active");
			$("#homeActive").addClass("active");
			
			var i = 0;
			var j = 0;
			var k = 0;
			
			$("#basicInfoDiv").hide();
			$("#itemDetailsDiv").hide();
			$("#mealOptionsDiv").hide();
			$("#submitButton").hide();
			$("#additionalSizeDiv").hide();
			$("#additionalSizeButton").hide();

			
			
			$("#startButton").on("click", function() {
				$('#createLegend').animate({ "right": "+=20%" }, "slow" )
				$('#createLegend').promise().done(function(){
					<!-- $("#createLegend").css("padding-top", "")  -->
					$("#startButton").hide();
					$('#basicInfoDiv').addClass('col-md-offset-4');
					$('#basicInfoDiv').fadeIn('slow');
				});
				
			});
			
			$("#additionalSizeButton").on("click", function() {
				$("#additionalSizeButton").hide();
				$('#additionalSizeDiv').fadeIn('slow');
					
			});


			$("#continueButton1").on("click", function() {
				$("#continueButton1").hide();
				$('#basicInfoDiv').animate({ "right": "+=33%" }, 1200)
				$('#basicInfoDiv').promise().done(function(){
					$("#basicInfoDiv").css("right", "") 
					$('#basicInfoDiv').removeClass('col-md-offset-4');
					$('#itemDetailsDiv').fadeIn('slow');
				});

			});
			
			$("#continueButton2").on("click", function() {
				$("#continueButton2").hide();
				$('#mealOptionsDiv').fadeIn('slow');
				$('body,html').animate({ scrollTop: $('body').height() }, 1200);
				$('#submitButton').fadeIn('slow');
			});
			
			$(".containerDiv").hide();
			$(".sizeDiv").hide();
			$(".optionalDiv").hide();

		// Date Time Picker configurations	
			
			 $('#datetimepicker1').datepicker()
				.on('changeDate', function(ev){
					$('#datetimepicker1').datepicker('hide');
			 });
			 
			 	 
			  $('#datetimepicker2').datepicker()
				.on('changeDate', function(ev){
					$('#datetimepicker2').datepicker('hide');
			 });
			 
			 $('#datetimepicker4').timepicker();
			 $('#datetimepicker3').timepicker();


		// popover message boxes on buttons
				 
			$("#addPop").popover({ trigger: "hover" });
			$("#add_row").popover({ trigger: "hover" });
			$("#add_meal").popover({ trigger: "hover" });
			$("#delete_row").popover({ trigger: "hover" });
			$("#delete_meal").popover({ trigger: "hover" });


			
			
			$("#mainCategory li").on("click", function() {
				//sets button text
				$("#category").text($($(this).find("a")).text())
				var categoryId = $(this).prop('id');
				//removes isSelected class
				$("#mainCategory li a").removeClass("isSelected");

				//add isSlected Class to clicked element
				$($(this).find('a')).addClass("isSelected")
				 var actualID = categoryId.slice(4, categoryId.length)
				$('#postCategory').remove();
				$('#dropdown-mainCategory').append('<input id="postCategory" name="postCategory" value="'+ actualID + '" type="hidden" required>');
				
				return changeMainIngredient(categoryId.slice(4, categoryId.length));
			});
			
		
			
			function changeMainIngredient(id){

				var divPartI = "<h5> Item Main Ingredient</h5><div class='dropdown' id='dropdown-mainIngredient'> <button class='btn btn-default dropdown-toggle' id='ingredient' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='mainIngredient' role='menu' aria-labelledby='ingredient'>";
				{% for element in categoryOptions %}
					
					if (id == {{element.category_id.category_id}})
						divPartI = divPartI +  "<li role='presentaton' id='{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-1' href='#/'>{{element.option_id.option_name}} </a></li>";
				{% endfor %}
				var res = divPartI + "</ul></div>";
				document.getElementById("dynamic_ingredient").innerHTML =  res;

				$("#mainIngredient li").on("click", function() {
				//sets button text
				$("#ingredient").text($($(this).find("a")).text())
				//removes isSelected class
				$("#mainIngredient li a").removeClass("isSelected");

				//add isSlected Class to clicked element
				$($(this).find('a')).addClass("isSelected")
	
				var actualID = $(this).prop('id');
				
				$('#postMainIngredient').remove();
				$('#dropdown-mainIngredient').append('<input id="postMainIngredient" name="postMainIngredient" value="'+ actualID + '" type="hidden">');
				
				
				return changeContainer();
				});
			};
			
			function changeContainer(){

				$(".containerDiv").show();

				$("#mainContainer li").on("click", function() {
					//sets button text
					$("#container").text($($(this).find("a")).text())
					//removes isSelected class
					$("#mainContainer li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")	
				
					var cont = $(this).prop('id');
					var actualID = cont.slice(5, cont.length);
					
					$('#postContainer').remove();
					$('#dropdown-container').append('<input id="postContainer" name="postContainer" value="'+ actualID + '" type="hidden">');
				
				
				
					return changeSize();
				});
			};
			
			function changeSize(){

				$(".sizeDiv").show();

				$("#mainSize li").on("click", function() {
					//sets button text
					$("#size").text($($(this).find("a")).text())
					var sizeText= $(this).text();
					//removes isSelected class
					$("#mainSize li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")	
					
					var siz = $(this).prop('id');

					var actualID = siz.slice(5,siz.length);
				
					$('#postMainSize').remove();
					$('#dropdown-size').append('<input id="postMainSize" name="postMainSize" value="'+ actualID + '" type="hidden">');
				
					$("#additionalSizeButton").show();

					
					return checkCount(sizeText);
				});
			};
			
			function checkCount(text){
				if (text.trim() == "Count") {
					$('#countDiv').remove();
					$('#sameBaseprice').remove();
					$('#secondColumn').append('<div class="checkbox" id="sameBaseprice" style="text-align:center"><label><input type="checkbox" id="priceCheckbox">same as Base Price?</label></div>');
					$('#secondColumn').append('<div class="container_details" id="countDiv"><div class="col-xs-12 col-md-6"><h5> How Many Pieces? </h5><div class="input-group"><input class="form-control" name="count_number" placeholder="Ex: 3, 6, 7, .. " required></div></div><div class="col-xs-12 col-md-6"><h5> Size Price </h5><div class="input-group"><div class="input-group-addon">$</div><input class="form-control" id="sizeNatural" name="sizeNatural" placeholder="2" required><div class="input-group-addon">.</div><input class="form-control" id="sizeFloat" name="sizeFloat" placeholder="90" required></div></div></div>');
					$(".optionalDiv").show();
					
					$('#priceCheckbox').change(function() {
						if ($(this).is(':checked')) {
							$('#sizeNatural').val($('#basePriceNatural').val());
							$('#sizeFloat').val($('#basePriceFloat').val()); 
						} else {
							$('#sizeNatural').val('');
							$('#sizeFloat').val('');
						}				
					});
				} else {
					$('#countDiv').remove();
					$('sameBaseprice').remove();
					$(".optionalDiv").show();
				}
		
			};
			
			
			$("#add_size").click(function(){
				
				 k++;
				$('#additionalSizeTable').append('<tr id="sizeRow-'+ k +'"></tr>');

				$('#sizeRow-'+k).html('<td>' + k  + '</td><td id="addCount-' + k + '"><div class="container_details" style="display:inline-block; transform:translateY(0%)" id="additionalSizeDropdown-' + k + '"><div class="dropdown" id="dropdown-addSize-' + k + '"><button class="btn btn-default dropdown-toggle" id="addSizeCategory-' + k + '" type="button" data-toggle="dropdown" aria-expanded="false">Size <span class="caret"></span></button><ul class="dropdown-menu" id="addSize-' + k + '" role="menu" aria-labelledby="addSizeCategory-' + k + '">{% for element in sizes %}<li role="presentaton" id="addSize-k-{{element.size_id}}"><a role="menuitem" tabindex="-1" href="#/">  {{element.size_name}} </a></li>{% endfor %}</ul></div></div></td>');

				$("#addSize-" + k + " li").on("click", function() {
					//sets button text
					$("#addSizeCategory-" + k).text($($(this).find("a")).text())
					var categoryId = $(this).prop('id');
					//removes isSelected class
					$("#addSize-" + k +" li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")
					
					var sizeText= $(this).text();
					var ing= $(this).prop('id');
					var actualID = ing.split('-')[3];
					
					$('#postAddSize-' + k).remove();
					$('#dropdown-addSize-' + k).append('<input id="postAddSize-' + k + '" name="postAddSize-' + k + '" value="'+ actualID + '" type="hidden">');
			
				
					return checkCount(sizeText);
				});
				
				function checkCount(text){
					if (text.trim() == "Count") {
						$('#sameBasepriceTd-' + k).remove();
						$('#addSizePriceTd-' + k).remove();
						$('#additionalCount-' + k).remove();
						$('#additionalSizeDropdown-' + k).css('transform' , 'translateY(-40%)');
						$('#addCount-' + k).append('<div class="input-group" style="display:inline-block; padding-left:20px" id="additionalCount-' + k + '"><input class="form-control" name="additionalSizeCount-'+ k  + '" placeholder="Ex: 3, 6, 7, .. " required></div>');
						$('#sizeRow-' + k).append('<td id="sameBasepriceTd-' + k + '"><div class="checkbox" id="sameBaseprice-addSize-' + k + '" style="text-align:center"><label><input type="checkbox" id="addSizePriceCheckbox-' + k + '">same as Base Price?</label></div></td><td style="width:30%" id="addSizePriceTd-' + k + '"><div class="input-group" id="addSizePrice-'+ k + '"><div class="input-group-addon">$</div><input class="form-control" name="addSizeNatural-' + k + '" placeholder="Ex: 2 dollars"><div class="input-group-addon">.</div><input class="form-control" name="addSizeFloat-'+ k + '" placeholder="Ex: 90 Cents"></div></td>');
					} else {
						$('#sameBasepriceTd-' + k).remove();
						$('#addSizePriceTd-' + k).remove();
						$('#additionalCount-' + k).remove();
						$('#sizeRow-' + k).append('<td id="sameBasepriceTd-' + k + '"><div class="checkbox" id="sameBaseprice-addSize-' + k + '"  style="text-align:center"><label><input type="checkbox" id="addSizePriceCheckbox-' + k + '">same as Base Price?</label></div></td><td style="width:30%" id="addSizePriceTd-' + k + '"><div class="input-group" id="addSizePrice-'+ k + '"><div class="input-group-addon">$</div><input class="form-control" name="addSizeNatural-' + k + '" placeholder="Ex: 2 dollars"><div class="input-group-addon">.</div><input class="form-control" name="addSizeFloat-'+ k + '" placeholder="Ex: 90 Cents"></div></td>');
					}

				};
					  
					  
			});
			
			 $("#delete_size").click(function(){
				if (k>0) {
					$("#sizeRow-"+ k).remove();
					k--;

				 }
			});
			
			
			
						
		
			$("#add_row").click(function(){
				
				 i++;
				$('#optionalIngredientsTable').append('<tr id="row-'+ i +'"></tr>');

				$('#row-'+i).html('<td>' + i  + '</td><td><div class="container_details"><div class="dropdown"><button class="btn btn-default dropdown-toggle" id="optionalCategory-' + i + '" type="button" data-toggle="dropdown" aria-expanded="false">Category	<span class="caret"></span></button><ul class="dropdown-menu" id="optionalCatMenu-' + i + '" role="menu" aria-labelledby="optionalCategory-' + i + '">{% for element in categories %}<li role="presentaton" id="optional-cat-' + i + '-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li>{% endfor %}	</ul></div></div></td><td id="optionalIngTd-' + i + '"> </td><td><label class="radio-inline"><input id="selectFixed-' + i + '" type="radio" name="itemIsFixed-' + i + '" value="fixed" required>Fixed</label></td><td id="radioOptional-' + i + '"><label class="radio-inline"><input id="selectOptional-' + i + '" type="radio" name="itemIsFixed-' + i + '" value="optional">Optional</label></td></tr>');

					$("#optionalCatMenu-" + i + " li").on("click", function() {
						//sets button text
						$("#optionalCategory-" + i).text($($(this).find("a")).text())
						var categoryId = $(this).prop('id');
						//removes isSelected class
						$("#optionalCatMenu-" + i +" li a").removeClass("isSelected");

						//add isSlected Class to clicked element
						$($(this).find('a')).addClass("isSelected")
						
						return changeOptionalIngredient(categoryId.slice(15, categoryId.length));
					});
				
				
				function changeOptionalIngredient(id){
					var divPartI = "<div class='dropdown' id='dropdown-ing-" + i + "'><button class='btn btn-default dropdown-toggle' id='optionalIngredient-" + i + "' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='optionalIngMenu-"+ i + "' role='menu' aria-labelledby='optionalIngredient-" + i + "'>";
					{% for element in categoryOptions %}
						
						if (id == {{element.category_id.category_id}})
							divPartI = divPartI +  "<li role='presentaton' id='optional-" + i + "-{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-" + i + "' href='#/'>{{element.option_id.option_name}} </a></li>";
					{% endfor %}
					var res = divPartI + "</ul></div>";
					
					document.getElementById("optionalIngTd-" + i).innerHTML =  res;

					$("#optionalIngMenu-" + i + " li").on("click", function() {
					//sets button text
					$("#optionalIngredient-" + i).text($($(this).find("a")).text())
					//removes isSelected class
					$("#optionalIngMenu-" + i + " li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")
						
					var ing= $(this).prop('id');

					var actualID = ing.split('-')[2];
				
					$('#postIng-' + i).remove();
					$('#dropdown-ing-' + i).append('<input id="postIng-' + i + '" name="postIng-' + i + '" value="'+ actualID + '" type="hidden">');
				
					});
				};
				
				$("#selectOptional-" + i).on("click", function() {
					//sets button text
					
					$('#radioOptional-' + i).append('<div class="input-group" id="additionalPrice-' + i + '"><div class="input-group-addon">Additional Price $</div><input class="form-control" name="ingPriceNatural-' + i + '" placeholder="2" required><div class="input-group-addon">.</div><input class="form-control" name="ingPriceFloat-' + i + '" placeholder="90" required></div>');
				});
				
				$("#selectFixed-" + i).on("click", function() {
					//sets button text
					$("#additionalPrice-" + i).remove();
				});
					  
					  
					  
			});
			
			 $("#delete_row").click(function(){
				if (i>0) {
					$("#row-"+ i).remove();
					i--;

				 }
			});
			
			$("#add_meal").click(function(){
				
				 j++;
				$('#mealTable').append('<tr id="mealRow-'+ j +'"></tr>');

				$('#mealRow-'+j).html('<td>' + j  + '</td><td><div class="container_details"><div class="dropdown"><button class="btn btn-default dropdown-toggle" id="sideCategory-'+ j + '" type="button" data-toggle="dropdown" aria-expanded="false">Category<span class="caret"></span></button><ul class="dropdown-menu" id="sideCatMenu-'+ j + '" role="menu" aria-labelledby="sideCategory-'+ j + '">{% for element in categories %} <li role="presentaton" id="side-cat-'+ j + '-{{element.category_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.category_name}} </a></li> {% endfor %}</ul></div></div></td><td id="sideIngTd-'+ j + '"> </td><td id="sideSizeDiv-' + j + '"><div class="container_details" style="display:inline-block; transform:translateY(0%)" id="sideSizeDropdown-' + j + '"><div class="dropdown" id="dropdown-sideSize-' + j + '"><button class="btn btn-default dropdown-toggle" id="sideSize-'+ j + '" type="button" data-toggle="dropdown" aria-expanded="false">Size <span class="caret"></span></button><ul class="dropdown-menu" id="sideSizeMenu-'+ j + '" role="menu" aria-labelledby="sideSize-'+ j + '">{% for element in sizes %}<li role="presentaton" id="side-size-'+ j + '-{{element.size_id}}" ><a role="menuitem" tabindex="-1" href="#/">{{element.size_name}} </a></li>{% endfor %}</ul></div></div></td><td style="width:30%"><div class="input-group" id="mealPrice-'+ j + '"><div class="input-group-addon">$</div><input class="form-control" name="mealNatural-' + j + '" placeholder="Ex: 2 dollars"><div class="input-group-addon">.</div><input class="form-control" name="mealFloat-'+ j + '" placeholder="Ex: 90 Cents"></div></td>');
							
				$("#sideCatMenu-" + j + " li").on("click", function() {
						//sets button text
						$("#sideCategory-" + j).text($($(this).find("a")).text())
						var categoryId = $(this).prop('id');
						//removes isSelected class
						$("#sideCatMenu-" + j +" li a").removeClass("isSelected");

						//add isSlected Class to clicked element
						$($(this).find('a')).addClass("isSelected")
						
						return changeSideIngredient(categoryId.slice(11, categoryId.length));
					});
					
				function changeSideIngredient(id){
					var divPartI = "<div class='dropdown' id='dropdown-sideIng-" + j + "'><button class='btn btn-default dropdown-toggle' id='sideIngredient-" + j + "' type='button' data-toggle='dropdown' aria-expanded='false'>Main Ingredient <span class='caret'></span></button><ul class='dropdown-menu' id='sideIngMenu-"+ j + "' role='menu' aria-labelledby='sideIngredient-" + j + "'>";
					{% for element in categoryOptions %}
						
						if (id == {{element.category_id.category_id}})
							divPartI = divPartI +  "<li role='presentaton' id='side-" + j + "-{{element.option_id.option_id}}' ><a role='menuitem' tabindex='-" + j + "' href='#/'>{{element.option_id.option_name}} </a></li>";
					{% endfor %}
					var res = divPartI + "</ul></div>";
					
					document.getElementById("sideIngTd-" + j).innerHTML =  res;

					$("#sideIngMenu-" + j + " li").on("click", function() {
					//sets button text
					$("#sideIngredient-" + j).text($($(this).find("a")).text())
					//removes isSelected class
					$("#sideIngMenu-" + j + " li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					
					$($(this).find('a')).addClass("isSelected")
					
				
					var ing= $(this).prop('id');
					console.log(ing);
					var actualID = ing.split('-')[2];
					
					$('#postSideIng-' + j).remove();
					$('#dropdown-sideIng-' + j).append('<input id="postSideIng-' + j + '" name="postSideIng-' + j + '" value="'+ actualID + '" type="hidden">');
				
					});
				};
				
				
				$("#sideSizeMenu-" + j + " li").on("click", function() {
					//sets button text
					$("#sideSize-" + j).text($($(this).find("a")).text())
					var sizeText= $(this).text();
					//removes isSelected class
					$("#sideSizeMenu-" + j + " li a").removeClass("isSelected");

					//add isSlected Class to clicked element
					$($(this).find('a')).addClass("isSelected")	
					
					var ing= $(this).prop('id');

					var actualID = ing.split('-')[3];
				
					$('#postSideSize-' + j).remove();
					$('#dropdown-sideSize-' + j).append('<input id="postSideSize-' + j + '" name="postSideSize-' + j + '" value="'+ actualID + '" type="hidden">');
				
					
					return checkCount(sizeText);
				});

				function checkCount(text){
					if (text.trim() == "Count") {
						$('#sideSizeDropdown-' + j).css('transform' , 'translateY(-40%)');
						$('#sideSizeDiv-' + j).append('<div class="input-group" style="display:inline-block; padding-left:20px" id="sideCount-' + j + '"><input class="form-control" name="countMeal-'+ j  + '" placeholder="Ex: 3, 6, 7, .. " required></div>');
					} else {
						$('#sideSizeDropdown-' + j).css('transform' , '');
						$('#sideCount-' + j).remove();
					}
			
				};
			
				
			});
			$("#delete_meal").click(function(){
				if (j>0) {
					$("#mealRow-"+ j).remove();
					j--;

				 }
			});
			
			
		});
		
	   
	</script>
	<div style="padding-top:5%"></div>
{% endblock %}	